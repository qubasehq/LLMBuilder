Copyright 2015, Simplilearn. All rights reserved. Domain 2: Operations CompTIA Network + Exam Prep (N10-006) Copyright 2015, Simplilearn. All rights reserved. Lesson 2-6: VLANs and Switches Copyright 2015, Simplilearn. All rights reserved. After completing this lesson, you will be able to: • Distinguish between a Broadcast Domain and a Collision Domain • Explain the function of the MAC Forward/Filter Table • Describe the disadvantage of using routers to break up broadcast domains • Describe the benefit of a Virtual LAN (VLAN) • Explain the difference between static and dynamic VLAN assignment • Identify the differences between managed and unmanaged switches • Describe the following switch features: port bonding, port mirroring, loop avoidance • Explain the use and benefits of Power-over-Ethernet (PoE) Objectives Copyright 2015, Simplilearn. All rights reserved. Refresher – Broadcast Domain and Collision Domain On an old-fashioned hub-based IP network, all traffic is delivered to every device. This is a very inefficient system because: • Every time a node transmits, it may collide (send while another node is also transmitting), causing both nodes to have to resend. • Packets intended for a specific device (on or off the network) are sent to every device. • Broadcast packets, such as DHCP requests, network discovery requests, and Address Resolution Protocol (ARP) requests are sent to every device. Copyright 2015, Simplilearn. All rights reserved. The Benefit of a Switch A Switch is an intelligent device which always performs at least two functions: 1. Each port is its own CSMA/CD Collision Domain. 2. As frames are received on each port, the switch makes a forward/flood/filter decision based on a quick reading of the frame’s header information. Some switches will also perform loop avoidance functions. Copyright 2015, Simplilearn. All rights reserved. MAC Forward / Filter Table Port MAC Addresses 1 2 3 4 5 6 7 8 Switch is powered on or reset; table is empty Copyright 2015, Simplilearn. All rights reserved. MAC Forward / Filter Table Port MAC Addresses 1 00:0a:95:9b:68:16 2 3 4 5 6 7 8 Frame received on port 1 – source MAC address is read from frame header and added to table. Frame is sent to all ports (Flooded) because destination MAC is not in the table. Copyright 2015, Simplilearn. All rights reserved. MAC Forward / Filter Table Port MAC Addresses 1 00:0a:95:9b:68:16 2 3 4 04:13:a7:01:fe:11 5 6 7 8 Response frame received on port 4 – source MAC address is read from frame header and added to table. Frame is sent to port 1 (Forwarded) because destination MAC is found in the table; no traffic is sent to other ports. Copyright 2015, Simplilearn. All rights reserved. MAC Forward / Filter Table Port MAC Addresses 1 00:0a:95:9b:68:16 2 A4:32:cc:05:ed:81 3 00:0a:95:9b:69:a0 4 04:13:a7:01:fe:11 5 00:0a:95:9b:69:33 6 01:77:ab:b1:43:19 03:2e:1f:56:2a:3e 05:23:a2:0a:d7:05 7 8 Over time as the table is built, more frames are hopefully Forwarded than Flooded, reducing network traffic. Table entries are reset after a period of time. Copyright 2015, Simplilearn. All rights reserved. Broadcast Traffic Three types of information are sent on each port of a switch: • Frames intended for a device on that port • Frames intended for a device which is not in the forward/filter table of the switch • Broadcast traffic – all switch segments are part of the same broadcast domain Broadcast traffic includes administrative information such as DHCP requests, ARP requests, and network discovery requests. As the network size increases, broadcast traffic becomes a bigger problem. Copyright 2015, Simplilearn. All rights reserved. Segmenting Broadcast Traffic • Routers break up broadcast domains • Disadvantages: • Expensive • Require separate physical networks Copyright 2015, Simplilearn. All rights reserved. Another Option: VLAN • A Virtual LAN (VLAN) is a virtually separated network, spanning one or more switches • Requires a switch (usually managed) with VLAN support Copyright 2015, Simplilearn. All rights reserved. VLAN: Static vs Dynamic • Ports on a switch are assigned to a specific VLAN (access link) or to a trunk (trunk link). • The default or native VLAN is the VLAN ports default if not specifically assigned. • Static assignment is when a port is assigned to a specific VLAN. • Alternatively a port can be assigned by a VLAN Membership Policy Server (VMPS) based on the MAC address of the device connected to the port (dynamic assignment). Copyright 2015, Simplilearn. All rights reserved. VLAN Trunk • Individual switch ports are designated as “Access” or “Trunk” ports. • Access ports behave exactly like normal switch ports, for their designated VLAN. • Trunk ports aggregate all VLAN data to send to another switch or router using VLAN Trunking Protocol (VTP). • Frames are tagged with VLAN identifier • ISL and 802.1q are popular VLAN tagging protocols. • VLAN tags are removed before packets are sent through access links Copyright 2015, Simplilearn. All rights reserved. VLAN Characteristics • VLANS operate entirely separately – no traffic is passed from one VLAN to another through the switch. • To connect traffic between two VLANs a router must be used. • VLANs are usually setup on unique subnets to allow potential routing. • Hosts on a VLAN are unaware they are on a VLAN. Copyright 2015, Simplilearn. All rights reserved. VLAN Trunks and Aggregation • A trunk carries tagged traffic for multiple VLANs between compatible switches or routers. • To improve bandwidth, port bonding (aka link aggregation or link bundling) can be used to combine two or more port connections between devices. • Link Aggregation Control Protocol (LACP) is commonly used to bundle disparate physical ports into one logical connection. Copyright 2015, Simplilearn. All rights reserved. Port Mirroring • There are situations when it would be beneficial to access the packets being transmitted by a switch port: • When using a packet sniffer to troubleshoot network issues, or • When using an Intrusion Detection System (IDS) to watch for signs of intrusions. • Port Mirroring duplicates all transmissions on a specific switch port to another designated port (Switched Port ANalyzer or SPAN) • Some switches can mirror a local port to a port on another compatible switch (Remote Switched Port ANalyzer or RSPAN) Copyright 2015, Simplilearn. All rights reserved. Managed vs Unmanaged • Unmanaged Switches – work automatically, provide basic switch functions without any configuration or IP address. • Managed Switches – • Can be configured from a local console connection (out- of-band management) or remotely (in-band management). • Must have an IP address and default gateway configured for in-band management using a virtual terminal utility such as Telnet Copyright 2015, Simplilearn. All rights reserved. Managed Switches • Managed Switches – configuration options • Username and Password to administer the switch • VLAN assignment • Port speed (10/100/1000Mbps) • Duplex (Full or Half) • Port Mirroring and Port Bonding settings • Some switches allow configuration via a centralized AAA Server (authentication, authorization, and accounting) Copyright 2015, Simplilearn. All rights reserved. Power over Ethernet • Power over Ethernet (PoE) can eliminate need for a separate power cord for IP devices. • Great for: • VoIP Phones • Wireless Access Points • Remote Cameras • Two standards: • PoE (802.3af): Up to 15.4W • PoE+ (802.3at): Up to 25.5W Copyright 2015, Simplilearn. All rights reserved. Power over Ethernet (contd.) • Uses unused wire pairs in Cat5 cabling, and/or transmits power over data pairs using common-mode signaling. • PoE may be supplied from the switch or from a separate PoE injector. Copyright 2015, Simplilearn. All rights reserved. Data Loops • Sometimes multiple connections are created (accidentally or on purpose) between two switches. • Except when they are properly configured in a LACP port-bonding scenario, this can create a “broadcast storm”. Copyright 2015, Simplilearn. All rights reserved. Loop Avoidance • Better switches often use loop avoidance strategies based on Spanning Tree Protocol (STP) • STP port states: • Blocked – no forwarding, drops all packets except Bridge Protocol Data Units (BPDU). “Should I stay blocked?” • Listening -- drops all packets except BPDU. “Should I go to blocked or learning?” • Learning – drops all packets except BPDU, begins to populate the MAC filter/forward table. “Where is everybody?” • Forwarding – normal operation • Disabled -- inoperative • STP uses BPDUs to map the best path to the root switch – alternate paths (loops) are blocked. • Spanning tree (802.1d) requires up to 50 seconds for all ports to reach Forwarding or Blocked states. • Rapid spanning tree (802.1w) simplifies the stages and can complete port election in 15 seconds. Copyright 2015, Simplilearn. All rights reserved. QUIZ a. b. c. d. Which function on a switch can improve network security? 1 Firewall IDS VLAN Collision Domain Copyright 2015, Simplilearn. All rights reserved. QUIZ The correct answer is a. b. c. d. Which function on a switch can improve network security? VLANs separate devices onto logically distinct networks, preventing them from accessing devices on other VLANs. c. Firewall IDS VLAN Collision Domain 1 Copyright 2015, Simplilearn. All rights reserved. QUIZ a. b. c. d. A switch port which carries traffic from all VLANs to another switch or router is called ______ . 2 An access port A port sniffer A trunk port A broadcast port Copyright 2015, Simplilearn. All rights reserved. QUIZ The correct answer is a. b. c. d. A switch port which carries traffic from all VLANs to another switch or router is called ______ . Access ports carry traffic for one specific VLAN, trunk ports carry tagged traffic for all VLANs. c. An access port A port sniffer A trunk port A broadcast port 2 Copyright 2015, Simplilearn. All rights reserved. Here is a quick recap of what we have learned in this lesson. Summary • Switches break up Collision Domains, Routers or VLANs can break up Broadcast Domains. • The MAC Forward/Filter table is created and used by a switch to forward frames to appropriate ports. • A Virtual LAN (VLAN) is a virtually separated network, spanning one or more switches. • Static assignment is when a switch port is assigned to a specific VLAN, dynamic assignment is when VLAN assignment is based on the MAC address of the device connected. • A VLAN trunk carries tagged traffic for multiple VLANs between compatible switches or routers. Copyright 2015, Simplilearn. All rights reserved. Copyright 2015, Simplilearn. All rights reserved. The next lesson is ‘Wireless Infrastructure’. This concludes ‘VLANs and Switches’.