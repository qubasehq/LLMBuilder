Copyright 2015, Simplilearn. All rights reserved. Domain 1: Network Theory and Architecture CompTIA Network + Exam Prep (N10-006) Copyright 2015, Simplilearn. All rights reserved. 1-11 DHCP and DNS Copyright 2015, Simplilearn. All rights reserved. ● Describe the difference between static and dynamic IP addressing. ● Explain the following DHCP attributes: reservations, scopes, leases, and suffixes ● Describe the benefit of Network Address Translation (NAT) ● Define port forwarding ● Explain these attributes of DNS records: A records, MX records, AAAA records, CNAME, and PTR. After completing this lesson, you will be able to: Objectives Copyright 2015, Simplilearn. All rights reserved. • To communicate properly on a TCP/IP network, a computer needs four things: • A unique IP Address like 192.168.1.95 to identify it on the network. • A Subnet mask like 255.255.255.0. This defines the scope of the local network – requests that fall within the subnet will be handled by the computer itself, not by a gateway. • A Gateway like 192.168.1.1. The computer will send any non-local network requests to this device. • One or more DNS Servers, like 8.8.8.8. These are servers that translate names, such as wikipedia.com, into IP addresses. IP Basics Copyright 2015, Simplilearn. All rights reserved. Static Addressing • All that information – IP, Subnet mask, Gateway, and DNS – could be manually assigned to each computer. • This can be referred to as having a Static IP • The picture to the right shows manual IP settings in Windows 7 • Using a static IP requires the administrator to keep track of each computer’s settings and ensure no duplicate IP addresses are issued. • If the gateway, DNS servers, or subnet change, each computer or device must be updated manually. Copyright 2015, Simplilearn. All rights reserved. Dynamic Addressing • Almost all devices support DHCP, Dynamic Host Control Protocol • DHCP allows the device to receive an assigned IP address, as well as predefined subnet, gateway, and DNS information, from a DHCP Server – this is referred to as Dynamic addressing or Dynamic IP • DHCP Servers are often a Router or Server • Some devices can choose which information is assigned by DHCP and which is set manually – the image to the right shows the IP, subnet, and gateway set via DHCP and the DNS set manually on a Windows 7 computer Copyright 2015, Simplilearn. All rights reserved. • The DHCP specification has two functions – an address allocation mechanism, and a communication mechanism for requesting and receiving addresses. • When a DHCP-enabled device first connects to the network, it has no IP and no network information – all it has is its MAC address. • The device sends a special broadcast request over UDP, looking for a DHCP Server. The request includes the device’s hardware address and may include a specific requested IP address. • If a DHCP Server exists on the local network, it will respond with appropriate IP configuration information. If a specific IP was requested, the Server may or may not provide that IP address. How DHCP Works Copyright 2015, Simplilearn. All rights reserved. The DHCP Command Sequence DHCP Discover DHCP Offer DHCP Request DHCP Ack IP address request IP address offer IP address selection IP address acknowledgment DHCP Client DHCP Server 1 2 3 4 Copyright 2015, Simplilearn. All rights reserved. The DHCP Server and Relaying • The DHCP Server is generally a router or server on the local network. • When a device requests a DHCP-supplied address, it does so by broadcasting on the local network. • In larger networks where the DHCP server may not be on the local network, a DHCP/BOOTP Relay Agent can be setup to forward DHCP requests to another network and relay DHCP responses back to the local network. • Cisco routers use the term IP Helper to refer to Relay Agents BOOTP is the predecessor to DHCP – it worked similarly but could not dynamically assign addresses. Relaying work the same in both, which is why it’s called a DHCP/BOOTP Relay Agent. ! Copyright 2015, Simplilearn. All rights reserved. DHCP Server Configuration The DHCP Server runs as an application on a Windows Server or similar network server, or runs as a function on a Router. Settings for the DHCP Server include: • Scopes – the sequential range of IP addresses the server can give out, also called the Address Pool • Leases – how long the IP assignment is good. Shorter leases mean an IP address won’t be wasted on devices that are no longer on the network, longer leases are less work for the DHCP server. Copyright 2015, Simplilearn. All rights reserved. DHCP Options The following may also be provided by the DHCP Server: • Subnet mask – details the scope of the local network • Gateway – the default gateway for the local network • DNS Server(s) – the default DNS servers for network devices to use • Default Suffix(es) – the default suffix to add when users search a servername (for example, the suffix “ourcompany.local” would find “ftp.ourcompany.local” if a network device looks for “ftp”) • Reservations – reservations allow specific IP addresses to be reserved for specific machines on the network. Copyright 2015, Simplilearn. All rights reserved. APIPA What happens if there’s no static IP information set, AND no DHCP? • On Windows devices, Automatic Private IP Addressing (APIPA) auto-configures the IP settings. • Starts at 169.254.0.1, up to 169.254.255.254 (IPv4) • Uses ARP to verify if IP is assigned elsewhere. • Also called link-local addressing Copyright 2015, Simplilearn. All rights reserved. Subnet, Gateway, and DNS • The Subnet mask IP setting determines the scope of the local network. A network device can communicate directly with any other network device on the same local network. • The Gateway handles any traffic which is NOT on the local network. So if a network device needs to communicate with another device which is not on the local network, it sends its request to the Gateway. • The DNS server translates network names – representing either local or remote machines – into IP addresses. Copyright 2015, Simplilearn. All rights reserved. Let’s look at how a Windows computer handles name resolution. If a user tries to go to the website “microsoft.com”, the computer follows these steps: 1. Am I microsoft.com? If so, handle the request directly; if not, go to step 2. 2. Is microsoft.com in my Hosts File? If so, use the Hosts File listing to find the IP address for microsoft.com; if not, go to step 3. 3. Query the DNS server(s) to find an address for microsoft.com. If an address is found, use it; if not, go to step 4. 4. Use NetBIOS name resolution to identify the name. NetBIOS name resolution is specific to Microsoft machines on the local network. 5. If none of these produces a result, return an error. Name Resolution Copyright 2015, Simplilearn. All rights reserved. Hosts File • A Hosts file takes precedence over DNS. • Hosts file is a manually created lists of domain names and their associated IP addresses. • On Windows computers the file is usually c:\windows\system32\drivers\etc\lmhosts.sam Copyright 2015, Simplilearn. All rights reserved. DNS Let’s look at how the Domain Name System (DNS) works on the Internet: • A domain name, such as donutfiesta.com, is registered with a domain name registrar. As part of the domain name registration, at least one (and usually 2 or 3) DNS servers are listed. • These DNS servers host the DNS settings for that domain – any inquiry for any address which ends with “donutfiesta.com” will be passed to these DNS servers for resolution. Copyright 2015, Simplilearn. All rights reserved. DNS settings can include several types of records related to a domain: • “A Record” – this is the default IP address where any traffic for the domain is directed (IPv4) • “MX Record” – this is the Mail eXchange record, any email traffic for the domain is directed to these IP addresses • “AAAA Record” – similar to the A record, the AAAA record is the details of IPv6 address for traffic to the domain. • “CNAME” – also called an alias or Canonical Name record, the CNAME redirects a subdomain such as “ftp.donutfiesta.com” to another server name. • “PTR Record” – Pointer records map an IP address to a hostname, and are primarily used for reverse DNS. DNS Records Copyright 2015, Simplilearn. All rights reserved. DNS Propagation • Changes to DNS servers do not take effect immediately. • DNS Server information is cached by all DNS servers around the Internet, so a change to the DNS server setting itself can take up to 72 hours to be in effect for all the Internet hosts. • This delay is referred to as the DNS propagation delay. Copyright 2015, Simplilearn. All rights reserved. Dynamic DNS • In some situations, the server referenced in a DNS record may not have a permanent, “static” IP address. • Dynamic DNS services can adjust DNS entries quickly to point to the current IP address of the target machine. • May include a software agent to monitor and report the current IP address to the DDNS server. • RFC 2136 provides a standard method of updating DDNS servers, but runs through DHCP. • Internet DDNS providers offer DDNS services for free or for a fee. Copyright 2015, Simplilearn. All rights reserved. NAT: Network Address Translation • NAT was created to solve the problem of limited public IP addresses with IPv4, though it has other uses as well. • Before NAT, each device connected to the Internet needed a public IP address. IPv4 uses 32 bits for IP addresses, yielding around 4.29 billion possible addresses. • NAT works like this: your border router has a public IP address, accessible on the Internet. But devices inside your network use private, local IP addresses such as 10.10.10.1 or 192.168.1.50. • NAT translates packets from your private, internal IP addresses at the router, then translates responses back. This allows potentially thousands of devices to share one public IP. Address Translation Certain IP subnets were designated for only private use – these include 10.x.x.x, 192.168.x.x, and 172.16.x.x through 172.31.x.x. These addresses are not used on the Internet and can be safely used on a local network. ! Copyright 2015, Simplilearn. All rights reserved. • SNAT: Static Network Address Translation. SNAT maps each private IP to a designated public IP. This does not help conserve public IP addresses but can be useful for migrating or merging networks. • DNAT: Dynamic Network Address Translation. DNAT maps each private IP to a public IP from a pool of available public IP addresses. • PAT (Port Address Translation) or Overloading: The most common form of NAT, Overloading is DNAT with just one public IP address shared by multiple private IP addresses. Each private IP address is assigned to a port, and outgoing packets from the router are designated for the port associated with the private IP which originated the request. Address Translation Options Copyright 2015, Simplilearn. All rights reserved. Ports • “Ports” can be visualized as separate connections on a router, but in reality the “Port” designator is specified in the TCP or UDP packet header. • Ports can identify specific services or, through PAT specific devices. Copyright 2015, Simplilearn. All rights reserved. Port Forwarding • Port Forwarding is a function of a router or firewall which can forward packets designated for a specific port or a port range to a specific computer or device. Copyright 2015, Simplilearn. All rights reserved. Proxy Servers • A proxy server makes network requests on behalf of another computer or device. • The proxy server is a “middleman” or intermediary. • Proxies can serve several functions: • Speeding up requests by caching common data at the proxy server • Bypassing content filters, especially geographic filters • Providing content-filtering services • Hiding the identity or attributes of the requesting device • Reverse proxy servers handle incoming requests on behalf of network servers Copyright 2015, Simplilearn. All rights reserved. Quiz Copyright 2015, Simplilearn. All rights reserved. QUIZ a. b. c. d. A DHCP server has run out of available addresses to allocate. The element to increase is the ___________. 1 lease subnet mask scope domain Copyright 2015, Simplilearn. All rights reserved. QUIZ The correct answer is a. b. c. d. A DHCP server has run out of available addresses to allocate. The element to increase is the ___________. The scope is the sequential range of IP addresses the server can give out, also called the Address Pool. c. lease subnet mask scope domain 1 Copyright 2015, Simplilearn. All rights reserved. QUIZ a. b. c. d. To manually associate an IP address with a domain name you can edit the ____________. 2 subnet static IP hosts file MX record Copyright 2015, Simplilearn. All rights reserved. QUIZ The correct answer is a. b. c. d. To manually associate an IP address with a domain name you can edit the ____________. The hosts file manually associates domain names with IP addresses on a particular host. c. subnet static IP hosts file MX record 2 Copyright 2015, Simplilearn. All rights reserved. QUIZ a. b. c. d. What is the function of a proxy server? 3 to convert private to public IP addresses to forward packets on a particular port to a specific host to allocate IP addresses dynamically to make network requests on behalf of another computer or device. Copyright 2015, Simplilearn. All rights reserved. QUIZ The correct answer is a. b. c. d. What is the function of a proxy server? A proxy server makes network requests on behalf of another computer or device. d. a. to convert private to public IP addresses b. to forward packets on a particular port to a specific host c. to allocate IP addresses dynamically d. to make network requests on behalf of another computer or device. 3 Copyright 2015, Simplilearn. All rights reserved. Here is a quick recap of what we have learned in this lesson. Summary • DHCP can dynamically assign IP address, subnet, gateway, and DNS information to network devices. • Manually setting IP, subnet, gateway, and DNS information is referred to as having a static IP. • DHCP scope is the sequential range of IP addresses the server can give out, also called the Address Pool. • A DNS “A Record” is the default IP address where any IPv4 traffic for the domain is directed. • Network Address Translation (NAT) translates packets from your private, internal IP addresses into a shared public IP address at the router. Copyright 2015, Simplilearn. All rights reserved. Copyright 2015, Simplilearn. All rights reserved. The next lesson is ‘Addressing Schema’. This concludes ‘DHCP and DNS’.